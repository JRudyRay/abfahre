<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Abfahre - Swiss Departure Board</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <meta name="theme-color" content="#e0e0e0">
  <meta name="description" content="Live Swiss public transport departures - Tram, Bus, Train">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-inner">
        <div class="sbb-clock" aria-label="SBB Uhr" role="img">
          <svg viewBox="0 0 100 100" class="sbb-clock-svg" aria-hidden="true">
            <!-- Face -->
            <circle cx="50" cy="50" r="47" class="sbb-clock-face" />
            <circle cx="50" cy="50" r="45" class="sbb-clock-inner" />

            <!-- Minute ticks (60) -->
            <circle cx="50" cy="50" r="40" class="sbb-minute-ticks" />

            <!-- Hour markers -->
            <g class="sbb-clock-marks">
              <!-- 12 / 3 / 6 / 9 stronger -->
              <rect x="48.5" y="6" width="3" height="12" rx="1.5" class="sbb-hour-mark-strong" transform="rotate(0 50 50)" />
              <rect x="48.5" y="6" width="3" height="12" rx="1.5" class="sbb-hour-mark-strong" transform="rotate(90 50 50)" />
              <rect x="48.5" y="6" width="3" height="12" rx="1.5" class="sbb-hour-mark-strong" transform="rotate(180 50 50)" />
              <rect x="48.5" y="6" width="3" height="12" rx="1.5" class="sbb-hour-mark-strong" transform="rotate(270 50 50)" />

              <!-- Remaining hours -->
              <rect x="49" y="7" width="2" height="10" rx="1" transform="rotate(30 50 50)" />
              <rect x="49" y="7" width="2" height="10" rx="1" transform="rotate(60 50 50)" />
              <rect x="49" y="7" width="2" height="10" rx="1" transform="rotate(120 50 50)" />
              <rect x="49" y="7" width="2" height="10" rx="1" transform="rotate(150 50 50)" />
              <rect x="49" y="7" width="2" height="10" rx="1" transform="rotate(210 50 50)" />
              <rect x="49" y="7" width="2" height="10" rx="1" transform="rotate(240 50 50)" />
              <rect x="49" y="7" width="2" height="10" rx="1" transform="rotate(300 50 50)" />
              <rect x="49" y="7" width="2" height="10" rx="1" transform="rotate(330 50 50)" />
            </g>

            <!-- Hands (rotated via JS) -->
            <g class="sbb-hands" transform="translate(50 50)">
              <line x1="0" y1="6" x2="0" y2="-20" class="sbb-hour-hand" id="sbb-hour" />
              <line x1="0" y1="10" x2="0" y2="-30" class="sbb-minute-hand" id="sbb-minute" />
              <line x1="0" y1="18" x2="0" y2="-38" class="sbb-second-hand" id="sbb-second" />
              <!-- Red disc on seconds hand -->
              <circle cx="0" cy="-26" r="5" class="sbb-second-disc" id="sbb-second-disc" />
              <!-- Center cap -->
              <circle cx="0" cy="0" r="3.2" class="sbb-center" />
            </g>
          </svg>
        </div>

        <div class="header-text">
          <h1>ABFAHRE</h1>
          <p class="subtitle">Echtzeit-Abfahrten</p>
        </div>
      </div>
    </header>

    <main>
      <!-- Station Search -->
      <div class="search-section">
        <div class="search-box">
          <input 
            type="text" 
            id="station-input" 
            placeholder="Haltestelle suchen..."
            autocomplete="off"
            spellcheck="false"
          >
          <button id="search-btn" class="btn">Suchen</button>
          <button id="location-btn" class="btn btn-icon" title="Nächste Haltestelle">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="10" r="3"/>
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
            </svg>
          </button>
        </div>
        <div id="suggestions" class="suggestions hidden"></div>
      </div>

      <!-- Error State -->
      <div id="error" class="error-state hidden">
        <p id="error-message"></p>
        <button id="retry-btn" class="btn">Erneut versuchen</button>
      </div>

      <!-- Empty State -->
      <div id="empty-state" class="empty-state">
        <div class="icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
          </svg>
        </div>
        <p>Suche eine Haltestelle oder nutze deinen Standort für Live-Abfahrten</p>
      </div>

      <!-- Departure Board -->
      <div id="board-wrapper" class="board-wrapper hidden">
        <div class="display-frame">
          <div class="display-bezel">
            <div class="display-screen">
              <!-- Loading State -->
              <div id="loading" class="loading-state hidden">
                <div class="loading-dots">
                  <span></span>
                  <span></span>
                  <span></span>
                </div>
                <div class="loading-text">Lade Abfahrten...</div>
              </div>

              <!-- Departures List -->
              <div id="departures-container" class="departures-container"></div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <div class="clock" id="clock"></div>
      <p class="footer-text">Daten: <a href="https://transport.opendata.ch" target="_blank" rel="noopener">Swiss Transport API</a></p>
    </footer>
  </div>

  <script src="js/api.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
